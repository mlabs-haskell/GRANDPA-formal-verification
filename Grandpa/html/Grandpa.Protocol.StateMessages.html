<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Grandpa.Protocol.StateMessages</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Grandpa.Protocol.StateMessages</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#"><span class="id" title="library">DataTypes.Dictionary</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Message.html#"><span class="id" title="library">Message</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Votes.html#"><span class="id" title="library">Votes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.VoterState.html#"><span class="id" title="library">VoterState</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Time.html#"><span class="id" title="library">Time</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.RoundNumber.html#"><span class="id" title="library">RoundNumber</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#"><span class="id" title="library">Protocol.FinalizedBlock</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Functor.html#"><span class="id" title="library">Classes.Functor</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Eqb.html#"><span class="id" title="library">Classes.Eqb</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Math.All.html#"><span class="id" title="library">Classes.Math.All</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.State.html#"><span class="id" title="library">State</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.Io.html#"><span class="id" title="library">Io</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">natWrapper</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">math</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="set_message_as_processed_by" class="idref" href="#set_message_as_processed_by"><span class="id" title="definition">set_message_as_processed_by</span></a> (<a id="v:1" class="idref" href="#v:1"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) (<a id="msg:2" class="idref" href="#msg:2"><span class="id" title="binder">msg</span></a>:<a class="idref" href="Grandpa.Message.html#Message"><span class="id" title="record">Message</span></a>) (<a id="state:3" class="idref" href="#state:3"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>): <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.State.html#update_message"><span class="id" title="definition">State.update_message</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:3"><span class="id" title="variable">state</span></a> (<a class="idref" href="Grandpa.Message.html#update_message_proccessed"><span class="id" title="definition">Message.update_message_proccessed</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:2"><span class="id" title="variable">msg</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#v:1"><span class="id" title="variable">v</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_message_processed_by" class="idref" href="#is_message_processed_by"><span class="id" title="definition">is_message_processed_by</span></a>(<a id="state:4" class="idref" href="#state:4"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) (<a id="msg:5" class="idref" href="#msg:5"><span class="id" title="binder">msg</span></a>:<a class="idref" href="Grandpa.Message.html#Message"><span class="id" title="record">Message</span></a>) (<a id="v:6" class="idref" href="#v:6"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>:= <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:5"><span class="id" title="variable">msg</span></a>.(<a class="idref" href="Grandpa.Message.html#id"><span class="id" title="projection">id</span></a>) <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:4"><span class="id" title="variable">state</span></a>.(<a class="idref" href="Grandpa.Protocol.State.html#pending_messages"><span class="id" title="projection">pending_messages</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="accept_vote" class="idref" href="#accept_vote"><span class="id" title="definition">accept_vote</span></a> (<a id="state:7" class="idref" href="#state:7"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) (<a id="voter:8" class="idref" href="#voter:8"><span class="id" title="binder">voter</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) (<a id="msg:9" class="idref" href="#msg:9"><span class="id" title="binder">msg</span></a>:<a class="idref" href="Grandpa.Message.html#Message"><span class="id" title="record">Message</span></a>): <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:8"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:7"><span class="id" title="variable">state</span></a>.(<a class="idref" href="Grandpa.Protocol.State.html#voters_state"><span class="id" title="projection">voters_state</span></a>)<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">voter_state_</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="voter_state_is_updated:10" class="idref" href="#voter_state_is_updated:10"><span class="id" title="binder">voter_state_is_updated</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.State.html#update_voter_state"><span class="id" title="definition">update_voter_state</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#state:7"><span class="id" title="variable">state</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:8"><span class="id" title="variable">voter</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.VoterState.html#update_with_msg"><span class="id" title="definition">VoterState.update_with_msg</span></a> <span class="id" title="var">voter_state_</span> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:9"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#set_message_as_processed_by"><span class="id" title="definition">set_message_as_processed_by</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:8"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:9"><span class="id" title="variable">msg</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter_state_is_updated:10"><span class="id" title="variable">voter_state_is_updated</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:7"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_vote_for_voter" class="idref" href="#update_vote_for_voter"><span class="id" title="definition">update_vote_for_voter</span></a> `{<a id="H:11" class="idref" href="#H:11"><span class="id" title="binder">Io</span></a>} (<a id="t:12" class="idref" href="#t:12"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>) (<a id="voter:13" class="idref" href="#voter:13"><span class="id" title="binder">voter</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) (<a id="state:14" class="idref" href="#state:14"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) (<a id="msg:15" class="idref" href="#msg:15"><span class="id" title="binder">msg</span></a>:<a class="idref" href="Grandpa.Message.html#Message"><span class="id" title="record">Message</span></a>) : <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Grandpa.Protocol.StateMessages.html#is_message_processed_by"><span class="id" title="definition">is_message_processed_by</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:14"><span class="id" title="variable">state</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:13"><span class="id" title="variable">voter</span></a> <span class="id" title="keyword">then</span>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#state:14"><span class="id" title="variable">state</span></a> <br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Grandpa.Protocol.Io.html#io_accept_vote"><span class="id" title="method">io_accept_vote</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#t:12"><span class="id" title="variable">t</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a>  <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:13"><span class="id" title="variable">voter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#accept_vote"><span class="id" title="definition">accept_vote</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:14"><span class="id" title="variable">state</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:13"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Protocol.StateMessages.html#t:12"><span class="id" title="variable">t</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#d44469564eec84e813491d96446c355e"><span class="id" title="notation">&lt;=?</span></a> (<a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a>.(<a class="idref" href="Grandpa.Message.html#time"><span class="id" title="projection">Message.time</span></a>)<a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Protocol.Io.html#global_time_constant"><span class="id" title="method">global_time_constant</span></a>)%<span class="id" title="var">math</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:13"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Classes.Eqb.html#d1e236ec039c134a0512d70204e70cbc"><span class="id" title="notation">=?</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a>.(<a class="idref" href="Grandpa.Message.html#voter"><span class="id" title="projection">Message.voter</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Grandpa.Protocol.StateMessages.html#accept_vote"><span class="id" title="definition">accept_vote</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:14"><span class="id" title="variable">state</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:13"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:15"><span class="id" title="variable">msg</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:14"><span class="id" title="variable">state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_votes_for_voter" class="idref" href="#update_votes_for_voter"><span class="id" title="definition">update_votes_for_voter</span></a> `{<a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">Io</span></a>} (<a id="t:17" class="idref" href="#t:17"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>) (<a id="state:18" class="idref" href="#state:18"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) (<a id="voter:19" class="idref" href="#voter:19"><span class="id" title="binder">voter</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) : <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="messages:20" class="idref" href="#messages:20"><span class="id" title="binder">messages</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#pending_messages"><span class="id" title="projection">pending_messages</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:18"><span class="id" title="variable">state</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="f:21" class="idref" href="#f:21"><span class="id" title="binder">f</span></a> := <a class="idref" href="Grandpa.Protocol.StateMessages.html#update_vote_for_voter"><span class="id" title="definition">update_vote_for_voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#t:17"><span class="id" title="variable">t</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#voter:19"><span class="id" title="variable">voter</span></a> <br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#messages:20"><span class="id" title="variable">messages</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:18"><span class="id" title="variable">state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="prune_message" class="idref" href="#prune_message"><span class="id" title="definition">prune_message</span></a> `{<a id="H:22" class="idref" href="#H:22"><span class="id" title="binder">Io</span></a>} (<a id="state:23" class="idref" href="#state:23"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) (<a id="msg:24" class="idref" href="#msg:24"><span class="id" title="binder">msg</span></a>:<a class="idref" href="Grandpa.Message.html#Message"><span class="id" title="record">Message</span></a>) : <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a> := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="all_participants:25" class="idref" href="#all_participants:25"><span class="id" title="binder">all_participants</span></a> := <a class="idref" href="Grandpa.Protocol.Io.html#get_all_time_participants"><span class="id" title="definition">get_all_time_participants</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="acc:26" class="idref" href="#acc:26"><span class="id" title="binder">acc</span></a> <a id="v:27" class="idref" href="#v:27"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#acc:26"><span class="id" title="variable">acc</span></a> (<a class="idref" href="Grandpa.Protocol.StateMessages.html#is_message_processed_by"><span class="id" title="definition">is_message_processed_by</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:23"><span class="id" title="variable">state</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:24"><span class="id" title="variable">msg</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#v:27"><span class="id" title="variable">v</span></a>) ) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#all_participants:25"><span class="id" title="variable">all_participants</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.State.html#remove_message"><span class="id" title="definition">remove_message</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:23"><span class="id" title="variable">state</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#msg:24"><span class="id" title="variable">msg</span></a> <br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#state:23"><span class="id" title="variable">state</span></a> .<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="prune_messages" class="idref" href="#prune_messages"><span class="id" title="definition">prune_messages</span></a> `{<a id="H:28" class="idref" href="#H:28"><span class="id" title="binder">Io</span></a>} (<a id="state:29" class="idref" href="#state:29"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>): <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#prune_message"><span class="id" title="definition">prune_message</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:29"><span class="id" title="variable">state</span></a>.(<a class="idref" href="Grandpa.Protocol.State.html#pending_messages"><span class="id" title="projection">pending_messages</span></a>)) ) <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:29"><span class="id" title="variable">state</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_votes" class="idref" href="#update_votes"><span class="id" title="definition">update_votes</span></a> `{<a id="H:30" class="idref" href="#H:30"><span class="id" title="binder">Io</span></a>} (<a id="t:31" class="idref" href="#t:31"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>) (<a id="state:32" class="idref" href="#state:32"><span class="id" title="binder">state</span></a>:<a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>) : <a class="idref" href="Grandpa.Protocol.State.html#State"><span class="id" title="record">State</span></a>:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state_votes_updated:33" class="idref" href="#state_votes_updated:33"><span class="id" title="binder">state_votes_updated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Protocol.StateMessages.html#update_votes_for_voter"><span class="id" title="definition">update_votes_for_voter</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#t:31"><span class="id" title="variable">t</span></a> ) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state:32"><span class="id" title="variable">state</span></a>.(<a class="idref" href="Grandpa.Protocol.State.html#voters_state"><span class="id" title="projection">voters_state</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#state:32"><span class="id" title="variable">state</span></a> <br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.StateMessages.html#prune_messages"><span class="id" title="definition">prune_messages</span></a> <a class="idref" href="Grandpa.Protocol.StateMessages.html#state_votes_updated:33"><span class="id" title="variable">state_votes_updated</span></a>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">math</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">natWrapper</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>