<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Grandpa.Votes</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Grandpa.Votes</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Instances.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#"><span class="id" title="library">Dictionary</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Blocks.Block.html#"><span class="id" title="library">Blocks.Block</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#"><span class="id" title="library">Blocks.AnyBlock</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.List.Count.html#"><span class="id" title="library">DataTypes.List.Count</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.List.Inb.html#"><span class="id" title="library">DataTypes.List.Inb</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.Sets.html#"><span class="id" title="library">DataTypes.Sets</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Eqb.html#"><span class="id" title="library">Classes.Eqb</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Functor.html#"><span class="id" title="library">Classes.Functor</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Voter.html#"><span class="id" title="library">Voter</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Voters.html#"><span class="id" title="library">Voters</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Vote.html#"><span class="id" title="library">Vote</span></a>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="Grandpa.Voter.html#"><span class="id" title="module">Voter</span></a>.<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="Grandpa.Voters.html#"><span class="id" title="module">Voters</span></a>.<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="Grandpa.Vote.html#"><span class="id" title="module">Vote</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Logic.JMeq.html#"><span class="id" title="library">Coq.Logic.JMeq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">blocks_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">Votes</h1>

  As with <span class="inlinecode"><a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a></span>, we choose to use the newtype pattern here.

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="Votes" class="idref" href="#Votes"><span class="id" title="record">Votes</span></a><br/>
&nbsp;&nbsp;(<a id="voters:1" class="idref" href="#voters:1"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>)<br/>
&nbsp;&nbsp;:<span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">VotesC</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="vlist" class="idref" href="#vlist"><span class="id" title="projection">vlist</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Grandpa.Vote.html#Vote"><span class="id" title="record">Vote</span></a> <a class="idref" href="Grandpa.Votes.html#voters:1"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a> {<span class="id" title="var">voters</span>} <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="votes_to_list" class="idref" href="#votes_to_list"><span class="id" title="definition">votes_to_list</span></a><br/>
&nbsp;&nbsp;{<a id="voters:4" class="idref" href="#voters:4"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:5" class="idref" href="#votes:5"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:4"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Grandpa.Vote.html#Vote"><span class="id" title="record">Vote</span></a> <a class="idref" href="Grandpa.Votes.html#voters:4"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#votes:5"><span class="id" title="variable">votes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Grandpa.Votes.html#VotesC"><span class="id" title="constructor">VotesC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l</span> ⇒ <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="votes_to_voters_list" class="idref" href="#votes_to_voters_list"><span class="id" title="definition">votes_to_voters_list</span></a><br/>
&nbsp;&nbsp;{<a id="voters:7" class="idref" href="#voters:7"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:8" class="idref" href="#votes:8"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:7"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="Grandpa.Vote.html#voter"><span class="id" title="projection">Vote.voter</span></a> <a class="idref" href="Grandpa.Votes.html#votes:8"><span class="id" title="variable">votes</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="votes_to_pair_list" class="idref" href="#votes_to_pair_list"><span class="id" title="definition">votes_to_pair_list</span></a><br/>
&nbsp;&nbsp;{<a id="voters:9" class="idref" href="#voters:9"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:10" class="idref" href="#votes:10"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:9"><span class="id" title="variable">voters</span></a> )<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="Grandpa.Vote.html#to_tuple"><span class="id" title="definition">Vote.to_tuple</span></a> (<a class="idref" href="Grandpa.Votes.html#votes_to_list"><span class="id" title="definition">votes_to_list</span></a> <a class="idref" href="Grandpa.Votes.html#votes:10"><span class="id" title="variable">votes</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="voter_voted_in_votes" class="idref" href="#voter_voted_in_votes"><span class="id" title="definition">voter_voted_in_votes</span></a><br/>
&nbsp;&nbsp;{<a id="voters:11" class="idref" href="#voters:11"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="voter:12" class="idref" href="#voter:12"><span class="id" title="binder">voter</span></a>: <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;(<a id="votes:13" class="idref" href="#votes:13"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:11"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#voter:12"><span class="id" title="variable">voter</span></a> (<a class="idref" href="Grandpa.Votes.html#votes_to_voters_list"><span class="id" title="definition">votes_to_voters_list</span></a> <a class="idref" href="Grandpa.Votes.html#votes:13"><span class="id" title="variable">votes</span></a>).<br/>

<br/>
</div>

<div class="doc">
   Since Votes is a wrap around a list, this function wraps <span class="inlinecode">++</span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mergeVotes" class="idref" href="#mergeVotes"><span class="id" title="definition">mergeVotes</span></a><br/>
&nbsp;&nbsp;{<a id="voters:14" class="idref" href="#voters:14"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a> }<br/>
&nbsp;&nbsp;(<a id="votes1:15" class="idref" href="#votes1:15"><span class="id" title="binder">votes1</span></a> :<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:14"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="votes2:16" class="idref" href="#votes2:16"><span class="id" title="binder">votes2</span></a> :<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:14"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:14"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#votes1:15"><span class="id" title="variable">votes1</span></a>, <a class="idref" href="Grandpa.Votes.html#votes2:16"><span class="id" title="variable">votes2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Grandpa.Votes.html#VotesC"><span class="id" title="constructor">VotesC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">list1</span>, <a class="idref" href="Grandpa.Votes.html#VotesC"><span class="id" title="constructor">VotesC</span></a> <span class="id" title="var">_</span> <span class="id" title="var">list2</span> ⇒ <a class="idref" href="Grandpa.Votes.html#VotesC"><span class="id" title="constructor">VotesC</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">list1</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">list2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_equivocate" class="idref" href="#is_equivocate"><span class="id" title="definition">is_equivocate</span></a><br/>
&nbsp;&nbsp;{<a id="voters:19" class="idref" href="#voters:19"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="voter:20" class="idref" href="#voter:20"><span class="id" title="binder">voter</span></a>: <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;(<a id="votes:21" class="idref" href="#votes:21"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:19"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:= 1 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#voter:20"><span class="id" title="variable">voter</span></a> ( <a class="idref" href="Grandpa.Votes.html#votes_to_voters_list"><span class="id" title="definition">votes_to_voters_list</span></a> <a class="idref" href="Grandpa.Votes.html#votes:21"><span class="id" title="variable">votes</span></a>).<br/>

<br/>
</div>

<div class="doc">
The first element are the equivocate voters
and the second one are the voters that only voted once.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="split_voters_by_equivocation" class="idref" href="#split_voters_by_equivocation"><span class="id" title="definition">split_voters_by_equivocation</span></a><br/>
&nbsp;&nbsp;{<a id="voters:22" class="idref" href="#voters:22"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:23" class="idref" href="#votes:23"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:22"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="voters_list:24" class="idref" href="#voters_list:24"><span class="id" title="binder">voters_list</span></a> := <a class="idref" href="Grandpa.Voters.html#to_list"><span class="id" title="definition">Voters.to_list</span></a> <a class="idref" href="Grandpa.Votes.html#voters:22"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#partition"><span class="id" title="definition">List.partition</span></a>  (<span class="id" title="keyword">fun</span> <a id="voter:25" class="idref" href="#voter:25"><span class="id" title="binder">voter</span></a> ⇒ <a class="idref" href="Grandpa.Votes.html#is_equivocate"><span class="id" title="definition">is_equivocate</span></a> <a class="idref" href="Grandpa.Votes.html#voter:25"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Votes.html#votes:23"><span class="id" title="variable">votes</span></a>) <a class="idref" href="Grandpa.Votes.html#voters_list:24"><span class="id" title="variable">voters_list</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Some" class="idref" href="#Some"><span class="id" title="section">Some</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Sections are really useful to declare local variables
   to avoid having big predicates.
   But sometimes we may need to close a section since
   coq interprets in a erroneous way what we write.
   We immediately open a section again when this happens.

</div>
<div class="code">
<span class="id" title="keyword">Variable</span> <a id="Some.voters" class="idref" href="#Some.voters"><span class="id" title="variable">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a id="Some.votes" class="idref" href="#Some.votes"><span class="id" title="variable">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#Some.voters"><span class="id" title="variable">voters</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="filter_votes_by_voters_subset" class="idref" href="#filter_votes_by_voters_subset"><span class="id" title="definition">filter_votes_by_voters_subset</span></a> (<a id="subset:28" class="idref" href="#subset:28"><span class="id" title="binder">subset</span></a> : <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#Some.voters"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="votes_list:29" class="idref" href="#votes_list:29"><span class="id" title="binder">votes_list</span></a> := <a class="idref" href="Grandpa.Votes.html#votes_to_list"><span class="id" title="definition">votes_to_list</span></a> <a class="idref" href="Grandpa.Votes.html#Some.votes"><span class="id" title="variable">votes</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="voters_as_nat_list:30" class="idref" href="#voters_as_nat_list:30"><span class="id" title="binder">voters_as_nat_list</span></a> := <a class="idref" href="Grandpa.Voters.html#to_list"><span class="id" title="definition">Voters.to_list</span></a> <a class="idref" href="Grandpa.Votes.html#subset:28"><span class="id" title="variable">subset</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="vote_predicate:32" class="idref" href="#vote_predicate:32"><span class="id" title="binder">vote_predicate</span></a> <a id="vote:31" class="idref" href="#vote:31"><span class="id" title="binder">vote</span></a> := <a class="idref" href="Grandpa.DataTypes.List.Inb.html#Inb"><span class="id" title="definition">Inb</span></a> (<a class="idref" href="Grandpa.Vote.html#voter"><span class="id" title="projection">Vote.voter</span></a> <a class="idref" href="Grandpa.Votes.html#vote:31"><span class="id" title="variable">vote</span></a>) <a class="idref" href="Grandpa.Votes.html#voters_as_nat_list:30"><span class="id" title="variable">voters_as_nat_list</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#VotesC"><span class="id" title="constructor">VotesC</span></a> <a class="idref" href="Grandpa.Votes.html#Some.voters"><span class="id" title="variable">voters</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="Grandpa.Votes.html#vote_predicate:32"><span class="id" title="variable">vote_predicate</span></a>  <a class="idref" href="Grandpa.Votes.html#votes_list:29"><span class="id" title="variable">votes_list</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Grandpa.Votes.html#Some"><span class="id" title="section">Some</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_safe" class="idref" href="#is_safe"><span class="id" title="definition">is_safe</span></a><br/>
&nbsp;&nbsp;{<a id="voters:33" class="idref" href="#voters:33"><span class="id" title="binder">voters</span></a>: <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a> }<br/>
&nbsp;&nbsp;(<a id="votes:34" class="idref" href="#votes:34"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:33"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#split_voters_by_equivocation"><span class="id" title="definition">split_voters_by_equivocation</span></a> <a class="idref" href="Grandpa.Votes.html#votes:34"><span class="id" title="variable">votes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">equivocate_voters</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">non_equivocate_voters</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <span class="id" title="var">equivocate_voters</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Grandpa.Voters.html#calculate_max_bizantiners"><span class="id" title="definition">calculate_max_bizantiners</span></a> <a class="idref" href="Grandpa.Votes.html#voters:33"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="BlockDictionary" class="idref" href="#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a> := <a class="idref" href="Grandpa.DataTypes.Dictionary.html#Dictionary"><span class="id" title="inductive">Dictionary.Dictionary</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h2 class="section">Vote count</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> First we split the set of votes in two, one of votes
  made by equivocate voters and other made by
   non equivocate voters

</li>
<li> We count the total votes for all the block that
  were votes (that is, we don't count the
   blocks b such that   b &lt; b'
   when some voter voted for b' but not for b)

</li>
<li> Then we do a "flatten" it means for every
  voted block b, if b' &lt; b
   then we add the votes for b to the votes for b'.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="aux_vote_update" class="idref" href="#aux_vote_update"><span class="id" title="definition">aux_vote_update</span></a> (<a id="old_votes:35" class="idref" href="#old_votes:35"><span class="id" title="binder">old_votes</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="new_votes:36" class="idref" href="#new_votes:36"><span class="id" title="binder">new_votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#old_votes:35"><span class="id" title="variable">old_votes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Grandpa.Votes.html#new_votes:36"><span class="id" title="variable">new_votes</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v'</span> ⇒ <a class="idref" href="Grandpa.Votes.html#new_votes:36"><span class="id" title="variable">new_votes</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">v'</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_with_vote_to_block" class="idref" href="#update_with_vote_to_block"><span class="id" title="definition">update_with_vote_to_block</span></a> (<a id="d:38" class="idref" href="#d:38"><span class="id" title="binder">d</span></a>:<a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a>)<br/>
&nbsp;&nbsp;(<a id="block:39" class="idref" href="#block:39"><span class="id" title="binder">block</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="Grandpa.DataTypes.Dictionary.html#update_with"><span class="id" title="definition">Dictionary.update_with</span></a> <a class="idref" href="Grandpa.Votes.html#block:39"><span class="id" title="variable">block</span></a> 1 <a class="idref" href="Grandpa.Votes.html#aux_vote_update"><span class="id" title="definition">aux_vote_update</span></a> <a class="idref" href="Grandpa.Votes.html#d:38"><span class="id" title="variable">d</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="make_votes_dictionary" class="idref" href="#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a><br/>
&nbsp;&nbsp;(<a id="votes:40" class="idref" href="#votes:40"><span class="id" title="binder">votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)(<a id="acc:41" class="idref" href="#acc:41"><span class="id" title="binder">acc</span></a>: <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">List.fold_left</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#update_with_vote_to_block"><span class="id" title="definition">update_with_vote_to_block</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#votes:40"><span class="id" title="variable">votes</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#acc:41"><span class="id" title="variable">acc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_votes_dictionary_step_empty" class="idref" href="#make_votes_dictionary_step_empty"><span class="id" title="lemma">make_votes_dictionary_step_empty</span></a><br/>
&nbsp;&nbsp;(<a id="votes:42" class="idref" href="#votes:42"><span class="id" title="binder">votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>) <a id="block:43" class="idref" href="#block:43"><span class="id" title="binder">block</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a> (<a class="idref" href="Grandpa.Votes.html#block:43"><span class="id" title="variable">block</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Grandpa.Votes.html#votes:42"><span class="id" title="variable">votes</span></a>) <a class="idref" href="Grandpa.DataTypes.Dictionary.html#empty"><span class="id" title="definition">Dictionary.empty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a> <a class="idref" href="Grandpa.Votes.html#votes:42"><span class="id" title="variable">votes</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#from_list"><span class="id" title="definition">Dictionary.from_list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#block:43"><span class="id" title="variable">block</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>1<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)%<span class="id" title="var">list</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="some_to_nat" class="idref" href="#some_to_nat"><span class="id" title="definition">some_to_nat</span></a> (<a id="x:44" class="idref" href="#x:44"><span class="id" title="binder">x</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#x:44"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_votes_dictionary_counts_right_aux" class="idref" href="#make_votes_dictionary_counts_right_aux"><span class="id" title="lemma">make_votes_dictionary_counts_right_aux</span></a><br/>
&nbsp;&nbsp;(<a id="votes:46" class="idref" href="#votes:46"><span class="id" title="binder">votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="block:47" class="idref" href="#block:47"><span class="id" title="binder">block</span></a> <a id="votes_value:48" class="idref" href="#votes_value:48"><span class="id" title="binder">votes_value</span></a> <a id="d:49" class="idref" href="#d:49"><span class="id" title="binder">d</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Votes.html#block:47"><span class="id" title="variable">block</span></a> (<a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a> <a class="idref" href="Grandpa.Votes.html#votes:46"><span class="id" title="variable">votes</span></a> <a class="idref" href="Grandpa.Votes.html#d:49"><span class="id" title="variable">d</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Votes.html#votes_value:48"><span class="id" title="variable">votes_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.Votes.html#votes_value:48"><span class="id" title="variable">votes_value</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#block:47"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#votes:46"><span class="id" title="variable">votes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Votes.html#some_to_nat"><span class="id" title="definition">some_to_nat</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Votes.html#block:47"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#d:49"><span class="id" title="variable">d</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_votes_dictionary_counts_right_aux2" class="idref" href="#make_votes_dictionary_counts_right_aux2"><span class="id" title="lemma">make_votes_dictionary_counts_right_aux2</span></a><br/>
&nbsp;&nbsp;(<a id="votes:50" class="idref" href="#votes:50"><span class="id" title="binder">votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="block:51" class="idref" href="#block:51"><span class="id" title="binder">block</span></a> <a id="d:52" class="idref" href="#d:52"><span class="id" title="binder">d</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#some_to_nat"><span class="id" title="definition">some_to_nat</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Votes.html#block:51"><span class="id" title="variable">block</span></a> (<a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a> <a class="idref" href="Grandpa.Votes.html#votes:50"><span class="id" title="variable">votes</span></a> <a class="idref" href="Grandpa.Votes.html#d:52"><span class="id" title="variable">d</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#block:51"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#votes:50"><span class="id" title="variable">votes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Votes.html#some_to_nat"><span class="id" title="definition">some_to_nat</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Votes.html#block:51"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#d:52"><span class="id" title="variable">d</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_votes_dictionary_counts_right" class="idref" href="#make_votes_dictionary_counts_right"><span class="id" title="lemma">make_votes_dictionary_counts_right</span></a><br/>
&nbsp;&nbsp;(<a id="votes:53" class="idref" href="#votes:53"><span class="id" title="binder">votes</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> (<a id="block:54" class="idref" href="#block:54"><span class="id" title="binder">block</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#some_to_nat"><span class="id" title="definition">some_to_nat</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a> <a class="idref" href="Grandpa.Votes.html#block:54"><span class="id" title="variable">block</span></a> (<a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a> <a class="idref" href="Grandpa.Votes.html#votes:53"><span class="id" title="variable">votes</span></a> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#empty"><span class="id" title="definition">Dictionary.empty</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#block:54"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#votes:53"><span class="id" title="variable">votes</span></a>.<br/>

<br/>
</div>

<div class="doc">
  A vote for <span class="inlinecode"><span class="id" title="var">B</span>:</span> <span class="inlinecode"><a class="idref" href="Grandpa.Blocks.Block.html#Block"><span class="id" title="inductive">Block</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> is also a vote for <span class="inlinecode"><span class="id" title="var">B'</span>:<a class="idref" href="Grandpa.Blocks.Block.html#Block"><span class="id" title="inductive">Block</span></a></span> <span class="inlinecode"><span class="id" title="var">n'</span></span>
   as long as <span class="inlinecode"><span class="id" title="var">B'</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">B</span></span>.

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="flat_votes_aux" class="idref" href="#flat_votes_aux"><span class="id" title="definition">flat_votes_aux</span></a> {<a id="m:55" class="idref" href="#m:55"><span class="id" title="binder">m</span></a>}<br/>
&nbsp;&nbsp;(<a id="block:56" class="idref" href="#block:56"><span class="id" title="binder">block</span></a>:<a class="idref" href="Grandpa.Blocks.Block.html#Block"><span class="id" title="inductive">Block</span></a> <a class="idref" href="Grandpa.Votes.html#m:55"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;(<a id="voter_number:57" class="idref" href="#voter_number:57"><span class="id" title="binder">voter_number</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="acc:58" class="idref" href="#acc:58"><span class="id" title="binder">acc</span></a>: <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a>): <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#block:56"><span class="id" title="variable">block</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Grandpa.Blocks.Block.html#OriginBlock"><span class="id" title="constructor">OriginBlock</span></a> ⇒ <a class="idref" href="Grandpa.Votes.html#acc:58"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Grandpa.Blocks.Block.html#NewBlock"><span class="id" title="constructor">NewBlock</span></a> <span class="id" title="var">older_block</span> <span class="id" title="var">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="update_vote:64" class="idref" href="#update_vote:64"><span class="id" title="binder">update_vote</span></a> <a id="maybe_old_value:61" class="idref" href="#maybe_old_value:61"><span class="id" title="binder">maybe_old_value</span></a> <a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#maybe_old_value:61"><span class="id" title="variable">maybe_old_value</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Grandpa.Votes.html#v:62"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v2</span> ⇒ <a class="idref" href="Grandpa.Votes.html#v:62"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><span class="id" title="var">v2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="updated_acc:65" class="idref" href="#updated_acc:65"><span class="id" title="binder">updated_acc</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.Dictionary.html#update_with"><span class="id" title="definition">Dictionary.update_with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#to_any"><span class="id" title="definition">AnyBlock.to_any</span></a> <a class="idref" href="Grandpa.Votes.html#block:56"><span class="id" title="variable">block</span></a>) <a class="idref" href="Grandpa.Votes.html#voter_number:57"><span class="id" title="variable">voter_number</span></a> <a class="idref" href="Grandpa.Votes.html#update_vote:64"><span class="id" title="variable">update_vote</span></a> <a class="idref" href="Grandpa.Votes.html#acc:58"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#flat_votes_aux:59"><span class="id" title="definition">flat_votes_aux</span></a> <span class="id" title="var">older_block</span> <a class="idref" href="Grandpa.Votes.html#voter_number:57"><span class="id" title="variable">voter_number</span></a> <a class="idref" href="Grandpa.Votes.html#updated_acc:65"><span class="id" title="variable">updated_acc</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="flat_votes_dictionary" class="idref" href="#flat_votes_dictionary"><span class="id" title="definition">flat_votes_dictionary</span></a><br/>
&nbsp;&nbsp;(<a id="acc:66" class="idref" href="#acc:66"><span class="id" title="binder">acc</span></a>:<a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a>) : <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">List.fold_right</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="anyblock:67" class="idref" href="#anyblock:67"><span class="id" title="binder">anyblock</span></a> <a id="updated_dict:68" class="idref" href="#updated_dict:68"><span class="id" title="binder">updated_dict</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#anyblock:67"><span class="id" title="variable">anyblock</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">block</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">votes_for_block</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <a class="idref" href="Grandpa.Votes.html#flat_votes_aux"><span class="id" title="definition">flat_votes_aux</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a> <span class="id" title="var">block</span>) <span class="id" title="var">votes_for_block</span> <a class="idref" href="Grandpa.Votes.html#updated_dict:68"><span class="id" title="variable">updated_dict</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.Dictionary.html#empty"><span class="id" title="definition">Dictionary.empty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> <a class="idref" href="Grandpa.Votes.html#acc:66"><span class="id" title="variable">acc</span></a>).<br/>

<br/>
</div>

<div class="doc">
  Takes a set of votes and returns a dictionary of blocks
   where the value for a block is the number of votes (already flattened)
   for that block.

<div class="paragraph"> </div>

  We have to use AnyBlock here since the Dictionary
   contains blocks of different lengths.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="count_votes" class="idref" href="#count_votes"><span class="id" title="definition">count_votes</span></a><br/>
&nbsp;&nbsp;{<a id="voters:70" class="idref" href="#voters:70"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:71" class="idref" href="#votes:71"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:70"><span class="id" title="variable">voters</span></a>): <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#make_votes_dictionary"><span class="id" title="definition">make_votes_dictionary</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<span class="id" title="keyword">fun</span> <a id="v:72" class="idref" href="#v:72"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Grandpa.Blocks.AnyBlock.html#to_any"><span class="id" title="definition">AnyBlock.to_any</span></a> (<a class="idref" href="Grandpa.Vote.html#block"><span class="id" title="projection">Vote.block</span></a> <a class="idref" href="Grandpa.Votes.html#v:72"><span class="id" title="variable">v</span></a>)) <a class="idref" href="Grandpa.Votes.html#votes:71"><span class="id" title="variable">votes</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.Dictionary.html#empty"><span class="id" title="definition">Dictionary.empty</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">out</span> ⇒ <a class="idref" href="Grandpa.Votes.html#flat_votes_dictionary"><span class="id" title="definition">flat_votes_dictionary</span></a> <span class="id" title="var">out</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="count_with_equivocations" class="idref" href="#count_with_equivocations"><span class="id" title="definition">count_with_equivocations</span></a><br/>
&nbsp;&nbsp;{<a id="voters:73" class="idref" href="#voters:73"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="T:74" class="idref" href="#T:74"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:73"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#BlockDictionary"><span class="id" title="definition">BlockDictionary</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="equivocate_voters:75" class="idref" href="#equivocate_voters:75"><span class="id" title="binder">equivocate_voters</span></a>, <a id="non_equivocate_voters:76" class="idref" href="#non_equivocate_voters:76"><span class="id" title="binder">non_equivocate_voters</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Grandpa.Votes.html#split_voters_by_equivocation"><span class="id" title="definition">split_voters_by_equivocation</span></a> <a class="idref" href="Grandpa.Votes.html#T:74"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="number_of_equivocates:77" class="idref" href="#number_of_equivocates:77"><span class="id" title="binder">number_of_equivocates</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="Grandpa.Votes.html#equivocate_voters:75"><span class="id" title="variable">equivocate_voters</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#count_votes"><span class="id" title="definition">count_votes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Votes.html#filter_votes_by_voters_subset"><span class="id" title="definition">filter_votes_by_voters_subset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#voters:73"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#T:74"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Voters.html#from_list"><span class="id" title="definition">Voters.from_list</span></a> <a class="idref" href="Grandpa.Votes.html#non_equivocate_voters:76"><span class="id" title="variable">non_equivocate_voters</span></a> <a class="idref" href="Grandpa.Votes.html#voters:73"><span class="id" title="variable">voters</span></a>.(<a class="idref" href="Grandpa.Voters.html#round_number_of_voters"><span class="id" title="projection">round_number_of_voters</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="count_votes_nil_is_zero" class="idref" href="#count_votes_nil_is_zero"><span class="id" title="lemma">count_votes_nil_is_zero</span></a><br/>
&nbsp;&nbsp;{<a id="voters:78" class="idref" href="#voters:78"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:79" class="idref" href="#votes:79"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:78"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#votes:79"><span class="id" title="variable">votes</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Votes.html#count_votes"><span class="id" title="definition">count_votes</span></a> <a class="idref" href="Grandpa.Votes.html#votes:79"><span class="id" title="variable">votes</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="count_votes_works" class="idref" href="#count_votes_works"><span class="id" title="lemma">count_votes_works</span></a><br/>
&nbsp;&nbsp;{<a id="block_number:80" class="idref" href="#block_number:80"><span class="id" title="binder">block_number</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>}<br/>
&nbsp;&nbsp;(<a id="block:81" class="idref" href="#block:81"><span class="id" title="binder">block</span></a>: <a class="idref" href="Grandpa.Blocks.Block.html#Block"><span class="id" title="inductive">Block</span></a> <a class="idref" href="Grandpa.Votes.html#block_number:80"><span class="id" title="variable">block_number</span></a>)<br/>
&nbsp;&nbsp;{<a id="voters:82" class="idref" href="#voters:82"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="votes:83" class="idref" href="#votes:83"><span class="id" title="binder">votes</span></a>:<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:82"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#some_to_nat"><span class="id" title="definition">some_to_nat</span></a>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.Dictionary.html#lookup"><span class="id" title="definition">Dictionary.lookup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#to_any"><span class="id" title="definition">AnyBlock.to_any</span></a> <a class="idref" href="Grandpa.Votes.html#block:81"><span class="id" title="variable">block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Votes.html#count_votes"><span class="id" title="definition">count_votes</span></a> <a class="idref" href="Grandpa.Votes.html#votes:83"><span class="id" title="variable">votes</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="vote:84" class="idref" href="#vote:84"><span class="id" title="binder">vote</span></a> ⇒ <a class="idref" href="Grandpa.Blocks.Block.html#is_prefix"><span class="id" title="definition">Block.is_prefix</span></a> <a class="idref" href="Grandpa.Votes.html#block:81"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#vote:84"><span class="id" title="variable">vote</span></a>.(<a class="idref" href="Grandpa.Vote.html#block"><span class="id" title="projection">Vote.block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#votes:83"><span class="id" title="variable">votes</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="voted_block_in_count_votes" class="idref" href="#voted_block_in_count_votes"><span class="id" title="lemma">voted_block_in_count_votes</span></a><br/>
&nbsp;&nbsp;{<a id="voters:85" class="idref" href="#voters:85"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a> }<br/>
&nbsp;&nbsp;(<a id="votes:86" class="idref" href="#votes:86"><span class="id" title="binder">votes</span></a>: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:85"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;{<a id="voter:87" class="idref" href="#voter:87"><span class="id" title="binder">voter</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a> }<br/>
&nbsp;&nbsp;{<a id="is_voter:88" class="idref" href="#is_voter:88"><span class="id" title="binder">is_voter</span></a>: <a class="idref" href="Grandpa.Voters.html#In"><span class="id" title="definition">Voters.In</span></a> <a class="idref" href="Grandpa.Votes.html#voter:87"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Votes.html#voters:85"><span class="id" title="variable">voters</span></a>}<br/>
&nbsp;&nbsp;{<a id="block_number:89" class="idref" href="#block_number:89"><span class="id" title="binder">block_number</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>}<br/>
&nbsp;&nbsp;{<a id="block:90" class="idref" href="#block:90"><span class="id" title="binder">block</span></a>: <a class="idref" href="Grandpa.Blocks.Block.html#Block"><span class="id" title="inductive">Block</span></a> <a class="idref" href="Grandpa.Votes.html#block_number:89"><span class="id" title="variable">block_number</span></a>}<br/>
&nbsp;&nbsp;(<a id="vote:91" class="idref" href="#vote:91"><span class="id" title="binder">vote</span></a>: <a class="idref" href="Grandpa.Vote.html#Vote"><span class="id" title="record">Vote</span></a> <a class="idref" href="Grandpa.Votes.html#voters:85"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;{<a id="vote_is:92" class="idref" href="#vote_is:92"><span class="id" title="binder">vote_is</span></a>: <a class="idref" href="Grandpa.Votes.html#vote:91"><span class="id" title="variable">vote</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Vote.html#VoteC"><span class="id" title="constructor">VoteC</span></a> <a class="idref" href="Grandpa.Votes.html#voters:85"><span class="id" title="variable">voters</span></a> <a class="idref" href="Grandpa.Votes.html#block_number:89"><span class="id" title="variable">block_number</span></a> <a class="idref" href="Grandpa.Votes.html#block:90"><span class="id" title="variable">block</span></a> <a class="idref" href="Grandpa.Votes.html#voter:87"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Votes.html#is_voter:88"><span class="id" title="variable">is_voter</span></a> }<br/>
&nbsp;&nbsp;(<a id="is_vote:93" class="idref" href="#is_vote:93"><span class="id" title="binder">is_vote</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Votes.html#vote:91"><span class="id" title="variable">vote</span></a> (<a class="idref" href="Grandpa.Votes.html#votes_to_list"><span class="id" title="definition">votes_to_list</span></a> <a class="idref" href="Grandpa.Votes.html#votes:86"><span class="id" title="variable">votes</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:94" class="idref" href="#v:94"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Blocks.AnyBlock.html#to_any"><span class="id" title="definition">AnyBlock.to_any</span></a> <a class="idref" href="Grandpa.Votes.html#block:90"><span class="id" title="variable">block</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v:94"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Votes.html#count_votes"><span class="id" title="definition">count_votes</span></a> <a class="idref" href="Grandpa.Votes.html#votes:86"><span class="id" title="variable">votes</span></a>)).<br/>

<br/>
</div>

<div class="doc">
  This is the core function implementing supermajority.

<div class="paragraph"> </div>

   From the paper:

<div class="paragraph"> </div>

<pre>
A voter equivocates in a set of votes [S] if they have cast multiple different
votes in [S] . We call a set [S] of votes safe if the number of voters
who equivocate in [S] is at most [f] . We say that [S] has a [supermajority]
for a block [B] if the set of voters who either have a vote for
blocks [&gt;= B] or equivocate in [S] has size at least [(n+f + 1)/2].
We count equivocations as votes for everything so that observing a vote
is monotonic, meaning that if [S ⊂ T] then if [S] has a supermajority
for [B] so does [T] , while being able to ignore yet more equivocating votes
from an equivocating voter.
</pre>

<div class="paragraph"> </div>

Our implementation aproach is as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Find the equivocate votes and the ones that aren't equivocate.

</li>
<li> Count the non equivocate votes for every block.

</li>
<li> Remove blocks that don't have at least <span class="inlinecode">(<span class="id" title="var">n</span>+<span class="id" title="var">f</span>+1)/2</span> votes.

</li>
</ul>
   In this case <span class="inlinecode"><span class="id" title="var">n</span>:=<a class="idref" href="Grandpa.Voters.html#length"><span class="id" title="definition">length</span></a></span> <span class="inlinecode"><a class="idref" href="Grandpa.Votes.html#Some.voters"><span class="id" title="variable">voters</span></a></span> and <span class="inlinecode"><span class="id" title="var">f</span>:=</span> <span class="inlinecode"><span class="id" title="var">floor</span>(<span class="id" title="var">n</span>/3)+1</span> <span class="inlinecode"></span>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="has_supermajority_predicate" class="idref" href="#has_supermajority_predicate"><span class="id" title="definition">has_supermajority_predicate</span></a><br/>
&nbsp;&nbsp;(<a id="voters:95" class="idref" href="#voters:95"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="number_of_equivocates:96" class="idref" href="#number_of_equivocates:96"><span class="id" title="binder">number_of_equivocates</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="block_and_vote:97" class="idref" href="#block_and_vote:97"><span class="id" title="binder">block_and_vote</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Grandpa.Votes.html#block_and_vote:97"><span class="id" title="variable">block_and_vote</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">number_of_votes</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#voters:95"><span class="id" title="variable">voters</span></a>.(<a class="idref" href="Grandpa.Voters.html#round_number_of_voters"><span class="id" title="projection">round_number_of_voters</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Voters.html#calculate_max_bizantiners"><span class="id" title="definition">calculate_max_bizantiners</span></a> <a class="idref" href="Grandpa.Votes.html#voters:95"><span class="id" title="variable">voters</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">(</span></a><span class="id" title="var">number_of_votes</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Votes.html#number_of_equivocates:96"><span class="id" title="variable">number_of_equivocates</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_supermajority_blocks" class="idref" href="#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a><br/>
&nbsp;&nbsp;{<a id="voters:99" class="idref" href="#voters:99"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="T:100" class="idref" href="#T:100"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:99"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="equivocate_voters:101" class="idref" href="#equivocate_voters:101"><span class="id" title="binder">equivocate_voters</span></a>, <a id="non_equivocate_voters:102" class="idref" href="#non_equivocate_voters:102"><span class="id" title="binder">non_equivocate_voters</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="Grandpa.Votes.html#split_voters_by_equivocation"><span class="id" title="definition">split_voters_by_equivocation</span></a> <a class="idref" href="Grandpa.Votes.html#T:100"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="number_of_equivocates:103" class="idref" href="#number_of_equivocates:103"><span class="id" title="binder">number_of_equivocates</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="Grandpa.Votes.html#equivocate_voters:101"><span class="id" title="variable">equivocate_voters</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="count:104" class="idref" href="#count:104"><span class="id" title="binder">count</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#count_votes"><span class="id" title="definition">count_votes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Votes.html#filter_votes_by_voters_subset"><span class="id" title="definition">filter_votes_by_voters_subset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#voters:99"><span class="id" title="variable">voters</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#T:100"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Voters.html#from_list"><span class="id" title="definition">Voters.from_list</span></a> <a class="idref" href="Grandpa.Votes.html#non_equivocate_voters:102"><span class="id" title="variable">non_equivocate_voters</span></a> <a class="idref" href="Grandpa.Votes.html#voters:99"><span class="id" title="variable">voters</span></a>.(<a class="idref" href="Grandpa.Voters.html#round_number_of_voters"><span class="id" title="projection">round_number_of_voters</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="blocks_with_super_majority:105" class="idref" href="#blocks_with_super_majority:105"><span class="id" title="binder">blocks_with_super_majority</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.Votes.html#has_supermajority_predicate"><span class="id" title="definition">has_supermajority_predicate</span></a> <a class="idref" href="Grandpa.Votes.html#voters:99"><span class="id" title="variable">voters</span></a> <a class="idref" href="Grandpa.Votes.html#number_of_equivocates:103"><span class="id" title="variable">number_of_equivocates</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> <a class="idref" href="Grandpa.Votes.html#count:104"><span class="id" title="variable">count</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#blocks_with_super_majority:105"><span class="id" title="variable">blocks_with_super_majority</span></a>.<br/>

<br/>
</div>

<div class="doc">
This definition doesn't take in account the repetitions of elements

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocates_are_voters_aux" class="idref" href="#equivocates_are_voters_aux"><span class="id" title="lemma">equivocates_are_voters_aux</span></a> {<a id="A:106" class="idref" href="#A:106"><span class="id" title="binder">A</span></a>} (<a id="l:107" class="idref" href="#l:107"><span class="id" title="binder">l</span></a> <a id="l1:108" class="idref" href="#l1:108"><span class="id" title="binder">l1</span></a> <a id="l2:109" class="idref" href="#l2:109"><span class="id" title="binder">l2</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Votes.html#A:106"><span class="id" title="variable">A</span></a>) <a id="p:110" class="idref" href="#p:110"><span class="id" title="binder">p</span></a><br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#partition"><span class="id" title="definition">List.partition</span></a> <a class="idref" href="Grandpa.Votes.html#p:110"><span class="id" title="variable">p</span></a> <a class="idref" href="Grandpa.Votes.html#l:107"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#l1:108"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#l2:109"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="x:111" class="idref" href="#x:111"><span class="id" title="binder">x</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Votes.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="Grandpa.Votes.html#l1:108"><span class="id" title="variable">l1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.Votes.html#p:110"><span class="id" title="variable">p</span></a> <a class="idref" href="Grandpa.Votes.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equivocates_are_voters" class="idref" href="#equivocates_are_voters"><span class="id" title="lemma">equivocates_are_voters</span></a><br/>
&nbsp;&nbsp;{<a id="voters:112" class="idref" href="#voters:112"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="T:113" class="idref" href="#T:113"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:112"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;{<a id="equivocate_voters:114" class="idref" href="#equivocate_voters:114"><span class="id" title="binder">equivocate_voters</span></a> <a id="non_equivocate_voters:115" class="idref" href="#non_equivocate_voters:115"><span class="id" title="binder">non_equivocate_voters</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>}<br/>
&nbsp;&nbsp;{<a id="split_result:116" class="idref" href="#split_result:116"><span class="id" title="binder">split_result</span></a>: <a class="idref" href="Grandpa.Votes.html#split_voters_by_equivocation"><span class="id" title="definition">split_voters_by_equivocation</span></a> <a class="idref" href="Grandpa.Votes.html#T:113"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#equivocate_voters:114"><span class="id" title="variable">equivocate_voters</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#non_equivocate_voters:115"><span class="id" title="variable">non_equivocate_voters</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>}<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> (<a id="voter:117" class="idref" href="#voter:117"><span class="id" title="binder">voter</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Votes.html#voter:117"><span class="id" title="variable">voter</span></a> <a class="idref" href="Grandpa.Votes.html#equivocate_voters:114"><span class="id" title="variable">equivocate_voters</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Votes.html#voter:117"><span class="id" title="variable">voter</span></a> (<a class="idref" href="Grandpa.Votes.html#votes_to_voters_list"><span class="id" title="definition">votes_to_voters_list</span></a> <a class="idref" href="Grandpa.Votes.html#T:113"><span class="id" title="variable">T</span></a>).<br/>

<br/>
</div>

<div class="doc">
From the paper:

<div class="paragraph"> </div>

<pre>
We count equivocations as votes for everything so that observing a vote is
monotonic, meaning that if [S ⊂ T] then if [S] has a supermajority
for [B] so does [T] , while being able to ignore yet more equivocating votes
from an equivocating voter.
</pre>

<div class="paragraph"> </div>

TODO: Really important

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="blocks_with_super_majority_are_related" class="idref" href="#blocks_with_super_majority_are_related"><span class="id" title="lemma">blocks_with_super_majority_are_related</span></a><br/>
&nbsp;&nbsp;{<a id="voters:122" class="idref" href="#voters:122"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="T:123" class="idref" href="#T:123"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:122"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="is_safe_t:124" class="idref" href="#is_safe_t:124"><span class="id" title="binder">is_safe_t</span></a>: <a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">is_safe</span></a> <a class="idref" href="Grandpa.Votes.html#T:123"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> (<a id="block1:125" class="idref" href="#block1:125"><span class="id" title="binder">block1</span></a> <a id="block2:126" class="idref" href="#block2:126"><span class="id" title="binder">block2</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>) (<a id="v1:127" class="idref" href="#v1:127"><span class="id" title="binder">v1</span></a> <a id="v2:128" class="idref" href="#v2:128"><span class="id" title="binder">v2</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#block1:125"><span class="id" title="variable">block1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v1:127"><span class="id" title="variable">v1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a> <a class="idref" href="Grandpa.Votes.html#T:123"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#block2:126"><span class="id" title="variable">block2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v2:128"><span class="id" title="variable">v2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a> <a class="idref" href="Grandpa.Votes.html#T:123"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a> <a class="idref" href="Grandpa.Votes.html#block1:125"><span class="id" title="variable">block1</span></a><a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">)</span></a> <a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">¬</span></a> <a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a> <a class="idref" href="Grandpa.Votes.html#block2:126"><span class="id" title="variable">block2</span></a><a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_in_location" class="idref" href="#list_in_location"><span class="id" title="lemma">list_in_location</span></a> {<a id="A:129" class="idref" href="#A:129"><span class="id" title="binder">A</span></a>} (<a id="x:130" class="idref" href="#x:130"><span class="id" title="binder">x</span></a>:<a class="idref" href="Grandpa.Votes.html#A:129"><span class="id" title="variable">A</span></a>) <a id="l:131" class="idref" href="#l:131"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Votes.html#x:130"><span class="id" title="variable">x</span></a> <a class="idref" href="Grandpa.Votes.html#l:131"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="l1:132" class="idref" href="#l1:132"><span class="id" title="binder">l1</span></a> <a id="l2:133" class="idref" href="#l2:133"><span class="id" title="binder">l2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Grandpa.Votes.html#l:131"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Votes.html#l1:132"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Grandpa.Votes.html#x:130"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="Grandpa.Votes.html#l2:133"><span class="id" title="variable">l2</span></a>.<br/>

<br/>
</div>

<div class="doc">
TODO: move to list facts

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="superset_has_subset_majority_blocks_aux1" class="idref" href="#superset_has_subset_majority_blocks_aux1"><span class="id" title="lemma">superset_has_subset_majority_blocks_aux1</span></a>  <a id="l:134" class="idref" href="#l:134"><span class="id" title="binder">l</span></a> <a id="p:135" class="idref" href="#p:135"><span class="id" title="binder">p</span></a> (<a id="b:136" class="idref" href="#b:136"><span class="id" title="binder">b</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:137" class="idref" href="#v:137"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#b:136"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v:137"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Grandpa.Votes.html#l:134"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Grandpa.Votes.html#p:135"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#b:136"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v:137"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:138" class="idref" href="#v:138"><span class="id" title="binder">v</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#b:136"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#v:138"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a> <a class="idref" href="Grandpa.Votes.html#p:135"><span class="id" title="variable">p</span></a> <a class="idref" href="Grandpa.Votes.html#l:134"><span class="id" title="variable">l</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VotesIsSubset" class="idref" href="#VotesIsSubset"><span class="id" title="definition">VotesIsSubset</span></a><br/>
&nbsp;&nbsp;{<a id="voters:139" class="idref" href="#voters:139"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a> }<br/>
&nbsp;&nbsp;(<a id="S:140" class="idref" href="#S:140"><span class="id" title="binder">S</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:139"><span class="id" title="variable">voters</span></a> )<br/>
&nbsp;&nbsp;(<a id="T:141" class="idref" href="#T:141"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:139"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:<span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="vote:142" class="idref" href="#vote:142"><span class="id" title="binder">vote</span></a>: <a class="idref" href="Grandpa.Vote.html#Vote"><span class="id" title="record">Vote</span></a> <a class="idref" href="Grandpa.Votes.html#voters:139"><span class="id" title="variable">voters</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#vote:142"><span class="id" title="variable">vote</span></a> <a class="idref" href="Grandpa.Votes.html#S:140"><span class="id" title="variable">S</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Votes.html#vote:142"><span class="id" title="variable">vote</span></a> <a class="idref" href="Grandpa.Votes.html#T:141"><span class="id" title="variable">T</span></a>.(<a class="idref" href="Grandpa.Votes.html#vlist"><span class="id" title="projection">vlist</span></a>))%<span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="intersection" class="idref" href="#intersection"><span class="id" title="definition">intersection</span></a><br/>
&nbsp;&nbsp;{<a id="voters:143" class="idref" href="#voters:143"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a> }<br/>
&nbsp;&nbsp;(<a id="S:144" class="idref" href="#S:144"><span class="id" title="binder">S</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:143"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="T:145" class="idref" href="#T:145"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:143"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:143"><span class="id" title="variable">voters</span></a>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="difference" class="idref" href="#difference"><span class="id" title="definition">difference</span></a><br/>
&nbsp;&nbsp;{<a id="voters:146" class="idref" href="#voters:146"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="S:147" class="idref" href="#S:147"><span class="id" title="binder">S</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:146"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="T:148" class="idref" href="#T:148"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:146"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:146"><span class="id" title="variable">voters</span></a>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_votes_subset_transitive" class="idref" href="#is_votes_subset_transitive"><span class="id" title="lemma">is_votes_subset_transitive</span></a><br/>
&nbsp;&nbsp;{<a id="voters:149" class="idref" href="#voters:149"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="S1:150" class="idref" href="#S1:150"><span class="id" title="binder">S1</span></a> <a id="S2:151" class="idref" href="#S2:151"><span class="id" title="binder">S2</span></a> <a id="S3:152" class="idref" href="#S3:152"><span class="id" title="binder">S3</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:149"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="s1_s2:153" class="idref" href="#s1_s2:153"><span class="id" title="binder">s1_s2</span></a> : <a class="idref" href="Grandpa.Votes.html#VotesIsSubset"><span class="id" title="definition">VotesIsSubset</span></a> <a class="idref" href="Grandpa.Votes.html#S1:150"><span class="id" title="variable">S1</span></a> <a class="idref" href="Grandpa.Votes.html#S2:151"><span class="id" title="variable">S2</span></a>)<br/>
&nbsp;&nbsp;(<a id="s2_s3:154" class="idref" href="#s2_s3:154"><span class="id" title="binder">s2_s3</span></a> : <a class="idref" href="Grandpa.Votes.html#VotesIsSubset"><span class="id" title="definition">VotesIsSubset</span></a> <a class="idref" href="Grandpa.Votes.html#S2:151"><span class="id" title="variable">S2</span></a> <a class="idref" href="Grandpa.Votes.html#S3:152"><span class="id" title="variable">S3</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#VotesIsSubset"><span class="id" title="definition">VotesIsSubset</span></a> <a class="idref" href="Grandpa.Votes.html#S1:150"><span class="id" title="variable">S1</span></a> <a class="idref" href="Grandpa.Votes.html#S3:152"><span class="id" title="variable">S3</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="superset_has_subset_majority_blocks" class="idref" href="#superset_has_subset_majority_blocks"><span class="id" title="lemma">superset_has_subset_majority_blocks</span></a><br/>
&nbsp;&nbsp;{<a id="voters:155" class="idref" href="#voters:155"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="S:156" class="idref" href="#S:156"><span class="id" title="binder">S</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:155"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="T:157" class="idref" href="#T:157"><span class="id" title="binder">T</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:155"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="safe_proof:158" class="idref" href="#safe_proof:158"><span class="id" title="binder">safe_proof</span></a>: <a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">is_safe</span></a> <a class="idref" href="Grandpa.Votes.html#T:157"><span class="id" title="variable">T</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;(<a id="is_subset:159" class="idref" href="#is_subset:159"><span class="id" title="binder">is_subset</span></a>: <a class="idref" href="Grandpa.Votes.html#VotesIsSubset"><span class="id" title="definition">VotesIsSubset</span></a> <a class="idref" href="Grandpa.Votes.html#S:156"><span class="id" title="variable">S</span></a> <a class="idref" href="Grandpa.Votes.html#T:157"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">∀</span> <a id="anyblock:160" class="idref" href="#anyblock:160"><span class="id" title="binder">anyblock</span></a> <a id="anyblock_votes:161" class="idref" href="#anyblock_votes:161"><span class="id" title="binder">anyblock_votes</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#anyblock:160"><span class="id" title="variable">anyblock</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#anyblock_votes:161"><span class="id" title="variable">anyblock_votes</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a>  <a class="idref" href="Grandpa.Votes.html#S:156"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="anyblock_votes_in_t:162" class="idref" href="#anyblock_votes_in_t:162"><span class="id" title="binder">anyblock_votes_in_t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#anyblock:160"><span class="id" title="variable">anyblock</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Grandpa.Votes.html#anyblock_votes_in_t:162"><span class="id" title="variable">anyblock_votes_in_t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a>  <a class="idref" href="Grandpa.Votes.html#T:157"><span class="id" title="variable">T</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="has_supermajority" class="idref" href="#has_supermajority"><span class="id" title="definition">has_supermajority</span></a><br/>
&nbsp;&nbsp;{<a id="voters:163" class="idref" href="#voters:163"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="S:164" class="idref" href="#S:164"><span class="id" title="binder">S</span></a> : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:163"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a>  <a class="idref" href="Grandpa.Votes.html#S:164"><span class="id" title="variable">S</span></a>) .<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="block_has_supermajority" class="idref" href="#block_has_supermajority"><span class="id" title="definition">block_has_supermajority</span></a><br/>
&nbsp;&nbsp;{<a id="voters:165" class="idref" href="#voters:165"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="block:166" class="idref" href="#block:166"><span class="id" title="binder">block</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="S:167" class="idref" href="#S:167"><span class="id" title="binder">S</span></a>:<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:165"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="blocks_with_super_majority:168" class="idref" href="#blocks_with_super_majority:168"><span class="id" title="binder">blocks_with_super_majority</span></a> := <a class="idref" href="Grandpa.Votes.html#get_supermajority_blocks"><span class="id" title="definition">get_supermajority_blocks</span></a> <a class="idref" href="Grandpa.Votes.html#S:167"><span class="id" title="variable">S</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">List.filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:169" class="idref" href="#x:169"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="Grandpa.Blocks.AnyBlock.html#is_prefix"><span class="id" title="definition">AnyBlock.is_prefix</span></a> <a class="idref" href="Grandpa.Votes.html#block:166"><span class="id" title="variable">block</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Grandpa.Votes.html#x:169"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#blocks_with_super_majority:168"><span class="id" title="variable">blocks_with_super_majority</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#nil"><span class="id" title="abbreviation">List.nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="blocks_that_has_supermajority_are_related" class="idref" href="#blocks_that_has_supermajority_are_related"><span class="id" title="lemma">blocks_that_has_supermajority_are_related</span></a><br/>
&nbsp;&nbsp;{<a id="voters:170" class="idref" href="#voters:170"><span class="id" title="binder">voters</span></a>:<a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="b1:171" class="idref" href="#b1:171"><span class="id" title="binder">b1</span></a> <a id="b2:172" class="idref" href="#b2:172"><span class="id" title="binder">b2</span></a>:<a class="idref" href="Grandpa.Blocks.AnyBlock.html#AnyBlock"><span class="id" title="record">AnyBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="S:173" class="idref" href="#S:173"><span class="id" title="binder">S</span></a>:<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters:170"><span class="id" title="variable">voters</span></a>)<br/>
&nbsp;&nbsp;(<a id="s_is_safe:174" class="idref" href="#s_is_safe:174"><span class="id" title="binder">s_is_safe</span></a> : <a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">is_safe</span></a> <a class="idref" href="Grandpa.Votes.html#S:173"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Grandpa.Votes.html#b1:171"><span class="id" title="variable">b1</span></a>.(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>) <a class="idref" href="Grandpa.Blocks.Block.html#81e660aade3f2d7ad6d955d42883c466"><span class="id" title="notation">¬</span></a> <a class="idref" href="Grandpa.Votes.html#b2:172"><span class="id" title="variable">b2</span></a>.(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Cast" class="idref" href="#Cast"><span class="id" title="section">Cast</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cast" class="idref" href="#cast"><span class="id" title="lemma">cast</span></a><br/>
&nbsp;&nbsp;{<a id="voters1:175" class="idref" href="#voters1:175"><span class="id" title="binder">voters1</span></a> <a id="voters2:176" class="idref" href="#voters2:176"><span class="id" title="binder">voters2</span></a> : <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="are_eq:177" class="idref" href="#are_eq:177"><span class="id" title="binder">are_eq</span></a>: <a class="idref" href="Grandpa.Votes.html#voters1:175"><span class="id" title="variable">voters1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Votes.html#voters2:176"><span class="id" title="variable">voters2</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:178" class="idref" href="#v:178"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters1:175"><span class="id" title="variable">voters1</span></a>) : <a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters2:176"><span class="id" title="variable">voters2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cast_list_jemq" class="idref" href="#cast_list_jemq"><span class="id" title="lemma">cast_list_jemq</span></a><br/>
&nbsp;&nbsp;{<a id="voters1:179" class="idref" href="#voters1:179"><span class="id" title="binder">voters1</span></a> <a id="voters2:180" class="idref" href="#voters2:180"><span class="id" title="binder">voters2</span></a> : <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="are_eq:181" class="idref" href="#are_eq:181"><span class="id" title="binder">are_eq</span></a>: <a class="idref" href="Grandpa.Votes.html#voters1:179"><span class="id" title="variable">voters1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Votes.html#voters2:180"><span class="id" title="variable">voters2</span></a>)<br/>
&nbsp;&nbsp;(<a id="l:182" class="idref" href="#l:182"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="Grandpa.Vote.html#Vote"><span class="id" title="record">Vote</span></a> <a class="idref" href="Grandpa.Votes.html#voters1:179"><span class="id" title="variable">voters1</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Logic.JMeq.html#JMeq"><span class="id" title="inductive">JMeq</span></a> <a class="idref" href="Grandpa.Votes.html#l:182"><span class="id" title="variable">l</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="Grandpa.Vote.html#cast"><span class="id" title="lemma">Vote.cast</span></a> <a class="idref" href="Grandpa.Votes.html#are_eq:181"><span class="id" title="variable">are_eq</span></a>) <a class="idref" href="Grandpa.Votes.html#l:182"><span class="id" title="variable">l</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cast_jmeq" class="idref" href="#cast_jmeq"><span class="id" title="lemma">cast_jmeq</span></a><br/>
&nbsp;&nbsp;{<a id="voters1:183" class="idref" href="#voters1:183"><span class="id" title="binder">voters1</span></a> <a id="voters2:184" class="idref" href="#voters2:184"><span class="id" title="binder">voters2</span></a> : <a class="idref" href="Grandpa.Voters.html#Voters"><span class="id" title="record">Voters</span></a>}<br/>
&nbsp;&nbsp;(<a id="are_eq:185" class="idref" href="#are_eq:185"><span class="id" title="binder">are_eq</span></a>: <a class="idref" href="Grandpa.Votes.html#voters1:183"><span class="id" title="variable">voters1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Votes.html#voters2:184"><span class="id" title="variable">voters2</span></a>)<br/>
&nbsp;&nbsp;(<a id="vs:186" class="idref" href="#vs:186"><span class="id" title="binder">vs</span></a>:<a class="idref" href="Grandpa.Votes.html#Votes"><span class="id" title="record">Votes</span></a> <a class="idref" href="Grandpa.Votes.html#voters1:183"><span class="id" title="variable">voters1</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Logic.JMeq.html#JMeq"><span class="id" title="inductive">JMeq</span></a> <a class="idref" href="Grandpa.Votes.html#vs:186"><span class="id" title="variable">vs</span></a> (<a class="idref" href="Grandpa.Votes.html#cast"><span class="id" title="lemma">cast</span></a> <a class="idref" href="Grandpa.Votes.html#are_eq:185"><span class="id" title="variable">are_eq</span></a> <a class="idref" href="Grandpa.Votes.html#vs:186"><span class="id" title="variable">vs</span></a>).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Grandpa.Votes.html#Cast"><span class="id" title="section">Cast</span></a>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">blocks</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>