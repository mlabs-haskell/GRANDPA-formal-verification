<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Grandpa.Protocol.Proofs.Safety</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Grandpa.Protocol.Proofs.Safety</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Blocks.AnyBlock.html#"><span class="id" title="library">Blocks.AnyBlock</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Votes.html#"><span class="id" title="library">Votes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.State.html#"><span class="id" title="library">State</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Time.html#"><span class="id" title="library">Time</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.RoundNumber.html#"><span class="id" title="library">RoundNumber</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Preliminars.html#"><span class="id" title="library">Preliminars</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.List.Count.html#"><span class="id" title="library">DataTypes.List.Count</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.List.Fold.html#"><span class="id" title="library">DataTypes.List.Fold</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.DataTypes.Sets.html#"><span class="id" title="library">DataTypes.Sets</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#"><span class="id" title="library">Protocol.FinalizedBlock</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.Io.html#"><span class="id" title="library">Protocol.Io</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Protocol.Protocol.html#"><span class="id" title="library">Protocol.Protocol</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Functor.html#"><span class="id" title="library">Classes.Functor</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Eqb.html#"><span class="id" title="library">Classes.Eqb</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Math.All.html#"><span class="id" title="library">Classes.Math.All</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#"><span class="id" title="library">Classes.Math.Semigroup</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Grandpa.Instances.List.html#"><span class="id" title="library">Instances.List</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.old_consistency.html#"><span class="id" title="library">Protocol.Proofs.Consistency.old_consistency</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Existence.html#"><span class="id" title="library">Protocol.Proofs.Consistency.Rounds.Existence</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Continuous.html#"><span class="id" title="library">Protocol.Proofs.Consistency.Rounds.Continuous</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Supermajority.html#"><span class="id" title="library">Protocol.Proofs.Consistency.Rounds.Supermajority</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Finalization.SubmmiterFinalized.html#"><span class="id" title="library">Protocol.Proofs.Consistency.Finalization.SubmmiterFinalized</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Finalization.VotersVerify.html#"><span class="id" title="library">Protocol.Proofs.Consistency.Finalization.VotersVerify</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>

<br/>
</div>

<div class="doc">
This module is in charge of the proof of the theorem 4.1
We focus our attention to either proof that a unsafe set
of votes exists or if we can't guarantee it, at least
to proof that there must be around with a byzantine voter.

<div class="paragraph"> </div>

The paper states a synchronous procedure in therm of things
like `At the moment of vote`. This kind of statement
would require from us to develop the notion of `at the moment of`
for the model. For now we don't do that and instead
stablish things like `at time <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">t</span></a></span> this is false but
at time t+1 it's true and remains true`
Usually this kind of statement implies the original intension
but for this particular theorem that's not possible.
As such we conform to a proof without a synchronous procedure.
Still as we use constructive logic, the establishment the theorem
is enough proof of the existence of an algorithm, it is given
by the function generated by COQ after we finish the proof.

<div class="paragraph"> </div>

The proof is as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> First we split it in tree cases by the naturals trichotomy,
  two of them can be collapsed (and we do so) in a single one.
  This leave us with the same two cases as in the paper:
  if the finalized blocks are in the same round
   or if they were finalized in different rounds.

<div class="paragraph"> </div>


</li>
<li> The case of two unrelated blocks that were finalized in
  the same round but maybe by different voters at different times.
  
<div class="paragraph"> </div>


</li>
<li> The case of two unrelated blocks that are finalized at different rounds.
  Here is were we divert from the paper.
  We first proof the corollary 4.3 and then use it to establish the
  theorem 4.1
  In the proof for 4.1, we end considering four cases.
  Let r1 and r2 be the two different rounds with r1 ocurring
  before r2.

<div class="paragraph"> </div>

  First if the number of byzantines is below the threshold
  for every round between r1 and r2 (inclusive), then we can use the corollary
  to establish the desired result.

<div class="paragraph"> </div>

  Otherwise  there exists a round r between r1 and r2 such that
  r has a number of byzantines above the threshold (either in
   the prevotes or the precommits) and r is the lowest round
   that is still above r1.  This is split in
   two more cases:

<div class="paragraph"> </div>

    We have a unsafe set of votes at r, in such case we finish.

<div class="paragraph"> </div>

    We can't guarantee a unsafe set of votes, but at least we
   can ensure that the number of byzantine voters are above the
   maximum allowed.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">math</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">natWrapper</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="VoterVotedInRound" class="idref" href="#VoterVotedInRound"><span class="id" title="definition">VoterVotedInRound</span></a> (<a id="v:1" class="idref" href="#v:1"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) (<a id="opaque:2" class="idref" href="#opaque:2"><span class="id" title="binder">opaque</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a>)<br/>
:<span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#voter_voted_in_votes"><span class="id" title="definition">Votes.voter_voted_in_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:1"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.OpaqueRound.html#get_all_prevote_votes"><span class="id" title="definition">OpaqueRound.get_all_prevote_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#opaque:2"><span class="id" title="variable">opaque</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Votes.html#voter_voted_in_votes"><span class="id" title="definition">Votes.voter_voted_in_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:1"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.OpaqueRound.html#get_all_precommit_votes"><span class="id" title="definition">OpaqueRound.get_all_precommit_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#opaque:2"><span class="id" title="variable">opaque</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="voter_is_hones_at_round" class="idref" href="#voter_is_hones_at_round"><span class="id" title="definition">voter_is_hones_at_round</span></a> `{<a id="H:3" class="idref" href="#H:3"><span class="id" title="binder">Io</span></a>} (<a id="v:4" class="idref" href="#v:4"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>) (<a id="r:5" class="idref" href="#r:5"><span class="id" title="binder">r</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
:=<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Grandpa.DataTypes.List.Count.html#count"><span class="id" title="definition">count</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:4"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#get_round_honest_voters"><span class="id" title="definition">get_round_honest_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:5"><span class="id" title="variable">r</span></a>))%<span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="time_decomposition" class="idref" href="#time_decomposition"><span class="id" title="lemma">time_decomposition</span></a> (<a id="t1:6" class="idref" href="#t1:6"><span class="id" title="binder">t1</span></a> <a id="t2:7" class="idref" href="#t2:7"><span class="id" title="binder">t2</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>) (<a id="leq_proof:8" class="idref" href="#leq_proof:8"><span class="id" title="binder">leq_proof</span></a>:<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t1:6"><span class="id" title="variable">t1</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t2:7"><span class="id" title="variable">t2</span></a>)<br/>
&nbsp;&nbsp;:(<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t2:7"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t1:6"><span class="id" title="variable">t1</span></a> <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t2:7"><span class="id" title="variable">t2</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#::natWrapper_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t1:6"><span class="id" title="variable">t1</span></a><a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decidable_amount_of_byzantines" class="idref" href="#decidable_amount_of_byzantines"><span class="id" title="lemma">decidable_amount_of_byzantines</span></a> `{<a id="io:9" class="idref" href="#io:9"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="rn:10" class="idref" href="#rn:10"><span class="id" title="binder">rn</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;:<br/>
(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:10"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:10"><span class="id" title="variable">rn</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:10"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:10"><span class="id" title="variable">rn</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decidable_amount_of_byzantines_between_rounds" class="idref" href="#decidable_amount_of_byzantines_between_rounds"><span class="id" title="lemma">decidable_amount_of_byzantines_between_rounds</span></a> `{<a id="io:11" class="idref" href="#io:11"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="r_lower:12" class="idref" href="#r_lower:12"><span class="id" title="binder">r_lower</span></a> <a id="r_upper:13" class="idref" href="#r_upper:13"><span class="id" title="binder">r_upper</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;(<a id="ordered:14" class="idref" href="#ordered:14"><span class="id" title="binder">ordered</span></a> : <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_lower:12"><span class="id" title="variable">r_lower</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_upper:13"><span class="id" title="variable">r_upper</span></a>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a> <span class="id" title="keyword">∀</span> <a id="rn:15" class="idref" href="#rn:15"><span class="id" title="binder">rn</span></a>: <a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_lower:12"><span class="id" title="variable">r_lower</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:15"><span class="id" title="variable">rn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:15"><span class="id" title="variable">rn</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_upper:13"><span class="id" title="variable">r_upper</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:15"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:15"><span class="id" title="variable">rn</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="rn:16" class="idref" href="#rn:16"><span class="id" title="binder">rn</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_lower:12"><span class="id" title="variable">r_lower</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:16"><span class="id" title="variable">rn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:16"><span class="id" title="variable">rn</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_upper:13"><span class="id" title="variable">r_upper</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:16"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:16"><span class="id" title="variable">rn</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="corollary_4_3_aux_step" class="idref" href="#corollary_4_3_aux_step"><span class="id" title="lemma">corollary_4_3_aux_step</span></a><br/>
&nbsp;&nbsp;`{<a id="io:17" class="idref" href="#io:17"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:18" class="idref" href="#t:18"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;(<a id="v:19" class="idref" href="#v:19"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;(<a id="rn:20" class="idref" href="#rn:20"><span class="id" title="binder">rn</span></a>: <a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;(<a id="v_is_honest:21" class="idref" href="#v_is_honest:21"><span class="id" title="binder">v_is_honest</span></a>: <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#voter_is_hones_at_round"><span class="id" title="definition">voter_is_hones_at_round</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:19"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.RoundNumber.html#from_nat"><span class="id" title="definition">RoundNumber.from_nat</span></a> 1 <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:20"><span class="id" title="variable">rn</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;(<a id="r1:22" class="idref" href="#r1:22"><span class="id" title="binder">r1</span></a> <a id="r2:23" class="idref" href="#r2:23"><span class="id" title="binder">r2</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a>)<br/>
&nbsp;&nbsp;(<a id="r1_is_round_at_t:24" class="idref" href="#r1_is_round_at_t:24"><span class="id" title="binder">r1_is_round_at_t</span></a> : <a class="idref" href="Grandpa.Protocol.State.html#get_voter_opaque_round"><span class="id" title="definition">get_voter_opaque_round</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:18"><span class="id" title="variable">t</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:19"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:20"><span class="id" title="variable">rn</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r1:22"><span class="id" title="variable">r1</span></a>)<br/>
&nbsp;&nbsp;(<a id="r2_is_round_at_t:25" class="idref" href="#r2_is_round_at_t:25"><span class="id" title="binder">r2_is_round_at_t</span></a> : <a class="idref" href="Grandpa.Protocol.State.html#get_voter_opaque_round"><span class="id" title="definition">get_voter_opaque_round</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:18"><span class="id" title="variable">t</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:19"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.RoundNumber.html#from_nat"><span class="id" title="definition">RoundNumber.from_nat</span></a> 1 <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:20"><span class="id" title="variable">rn</span></a>)  <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r2:23"><span class="id" title="variable">r2</span></a>)<br/>
&nbsp;&nbsp;(<a id="r1_completable:26" class="idref" href="#r1_completable:26"><span class="id" title="binder">r1_completable</span></a>: <a class="idref" href="Grandpa.OpaqueRound.html#is_completable"><span class="id" title="definition">OpaqueRound.is_completable</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r1:22"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;(<a id="r2_completable:27" class="idref" href="#r2_completable:27"><span class="id" title="binder">r2_completable</span></a>: <a class="idref" href="Grandpa.OpaqueRound.html#is_completable"><span class="id" title="definition">OpaqueRound.is_completable</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r2:23"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="eb1:28" class="idref" href="#eb1:28"><span class="id" title="binder">eb1</span></a> <a id="eb2:29" class="idref" href="#eb2:29"><span class="id" title="binder">eb2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#get_estimate"><span class="id" title="definition">OpaqueRound.get_estimate</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r1:22"><span class="id" title="variable">r1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb1:28"><span class="id" title="variable">eb1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#get_estimate"><span class="id" title="definition">OpaqueRound.get_estimate</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r2:23"><span class="id" title="variable">r2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb2:29"><span class="id" title="variable">eb2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.AnyBlock.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb1:28"><span class="id" title="variable">eb1</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb2:29"><span class="id" title="variable">eb2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;.<br/>
<span class="id" title="keyword">Lemma</span> <a id="corollary_4_3_aux" class="idref" href="#corollary_4_3_aux"><span class="id" title="lemma">corollary_4_3_aux</span></a><br/>
&nbsp;&nbsp;`{<a id="io:30" class="idref" href="#io:30"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="fb:31" class="idref" href="#fb:31"><span class="id" title="binder">fb</span></a>:<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb_in:32" class="idref" href="#fb_in:32"><span class="id" title="binder">fb_in</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> (<a class="idref" href="Grandpa.Time.html#from_nat"><span class="id" title="definition">Time.from_nat</span></a> 1 <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#time"><span class="id" title="projection">FinalizedBlock.time</span></a>))))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:33" class="idref" href="#n:33"><span class="id" title="binder">n</span></a> <a id="v:34" class="idref" href="#v:34"><span class="id" title="binder">v</span></a> <a id="nt:35" class="idref" href="#nt:35"><span class="id" title="binder">nt</span></a>,<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="t:36" class="idref" href="#t:36"><span class="id" title="binder">t</span></a> := (<a class="idref" href="Grandpa.Time.html#from_nat"><span class="id" title="definition">Time.from_nat</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#nt:35"><span class="id" title="variable">nt</span></a> <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#time"><span class="id" title="projection">FinalizedBlock.time</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="rn:37" class="idref" href="#rn:37"><span class="id" title="binder">rn</span></a> := (<a class="idref" href="Grandpa.RoundNumber.html#from_nat"><span class="id" title="definition">RoundNumber.from_nat</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#n:33"><span class="id" title="variable">n</span></a> <a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a><a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#voter_is_hones_at_round"><span class="id" title="definition">voter_is_hones_at_round</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:34"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:37"><span class="id" title="variable">rn</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="rm:38" class="idref" href="#rm:38"><span class="id" title="binder">rm</span></a>, <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>) <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rm:38"><span class="id" title="variable">rm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rm:38"><span class="id" title="variable">rm</span></a> <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:37"><span class="id" title="variable">rn</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rm:38"><span class="id" title="variable">rm</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rm:38"><span class="id" title="variable">rm</span></a>)))%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="r:39" class="idref" href="#r:39"><span class="id" title="binder">r</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.State.html#get_voter_opaque_round"><span class="id" title="definition">get_voter_opaque_round</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:36"><span class="id" title="variable">t</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:34"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:37"><span class="id" title="variable">rn</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:39"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#is_completable"><span class="id" title="definition">OpaqueRound.is_completable</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="eb:40" class="idref" href="#eb:40"><span class="id" title="binder">eb</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#get_estimate"><span class="id" title="definition">OpaqueRound.get_estimate</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:39"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb:40"><span class="id" title="variable">eb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.AnyBlock.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:31"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb:40"><span class="id" title="variable">eb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="corollary_4_3" class="idref" href="#corollary_4_3"><span class="id" title="lemma">corollary_4_3</span></a><br/>
&nbsp;&nbsp;`{<a id="io:47" class="idref" href="#io:47"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="fb:48" class="idref" href="#fb:48"><span class="id" title="binder">fb</span></a>:<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="t:49" class="idref" href="#t:49"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb_in:50" class="idref" href="#fb_in:50"><span class="id" title="binder">fb_in</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:48"><span class="id" title="variable">fb</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:49"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="rn:51" class="idref" href="#rn:51"><span class="id" title="binder">rn</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb_rn_leq_rn:52" class="idref" href="#fb_rn_leq_rn:52"><span class="id" title="binder">fb_rn_leq_rn</span></a>: <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:48"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>) <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:51"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;(<a id="byzantines_are_lower:53" class="idref" href="#byzantines_are_lower:53"><span class="id" title="binder">byzantines_are_lower</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:51"><span class="id" title="variable">rn</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:51"><span class="id" title="variable">rn</span></a>) )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="v:54" class="idref" href="#v:54"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;(<a id="v_is_honest:55" class="idref" href="#v_is_honest:55"><span class="id" title="binder">v_is_honest</span></a>: <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#voter_is_hones_at_round"><span class="id" title="definition">voter_is_hones_at_round</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:54"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:51"><span class="id" title="variable">rn</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> )<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;(<a id="fb_t_leq_t:56" class="idref" href="#fb_t_leq_t:56"><span class="id" title="binder">fb_t_leq_t</span></a> :<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:48"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#time"><span class="id" title="projection">FinalizedBlock.time</span></a>) <a class="idref" href="Grandpa.DataTypes.NatWrapper.html#9e08f242dff356ab9f6ab4c66061d2f6"><span class="id" title="notation">≤</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:49"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;(<a id="r:57" class="idref" href="#r:57"><span class="id" title="binder">r</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a>)<br/>
&nbsp;&nbsp;(<a id="r_is_round_at_t:58" class="idref" href="#r_is_round_at_t:58"><span class="id" title="binder">r_is_round_at_t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.State.html#get_voter_opaque_round"><span class="id" title="definition">get_voter_opaque_round</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:49"><span class="id" title="variable">t</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:54"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#rn:51"><span class="id" title="variable">rn</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:57"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="r_completable:59" class="idref" href="#r_completable:59"><span class="id" title="binder">r_completable</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#is_completable"><span class="id" title="definition">OpaqueRound.is_completable</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:57"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="eb:60" class="idref" href="#eb:60"><span class="id" title="binder">eb</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.OpaqueRound.html#get_estimate"><span class="id" title="definition">OpaqueRound.get_estimate</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:57"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb:60"><span class="id" title="variable">eb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.AnyBlock.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:48"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#eb:60"><span class="id" title="variable">eb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="theorem_4_1_eq_aux" class="idref" href="#theorem_4_1_eq_aux"><span class="id" title="lemma">theorem_4_1_eq_aux</span></a> `{<a id="io:61" class="idref" href="#io:61"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;{<a id="t:62" class="idref" href="#t:62"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>}<br/>
&nbsp;&nbsp;(<a id="fb:63" class="idref" href="#fb:63"><span class="id" title="binder">fb</span></a>: <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb_in:64" class="idref" href="#fb_in:64"><span class="id" title="binder">fb_in</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:63"><span class="id" title="variable">fb</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:62"><span class="id" title="variable">t</span></a>)))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="v:65" class="idref" href="#v:65"><span class="id" title="binder">v</span></a> := <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:63"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#submitter_voter"><span class="id" title="projection">FinalizedBlock.submitter_voter</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="r_n:66" class="idref" href="#r_n:66"><span class="id" title="binder">r_n</span></a> := <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb:63"><span class="id" title="variable">fb</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Consistency.VoterStateExists.html#IsParticipant"><span class="id" title="definition">VoterStateExists.IsParticipant</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:65"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t_increment:67" class="idref" href="#t_increment:67"><span class="id" title="binder">t_increment</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r:68" class="idref" href="#r:68"><span class="id" title="binder">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Existence.html#IsRoundAt"><span class="id" title="definition">Existence.IsRoundAt</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:65"><span class="id" title="variable">v</span></a> (<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:62"><span class="id" title="variable">t</span></a><a class="idref" href="Grandpa.Classes.Math.Semigroup.html#bd0dc97a35a215d97e8a463a14f0b420"><span class="id" title="notation">+</span></a><a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t_increment:67"><span class="id" title="variable">t_increment</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:66"><span class="id" title="variable">r_n</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:68"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="theorem_4_1_eq" class="idref" href="#theorem_4_1_eq"><span class="id" title="lemma">theorem_4_1_eq</span></a> `{<a id="io:73" class="idref" href="#io:73"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:74" class="idref" href="#t:74"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb1:75" class="idref" href="#fb1:75"><span class="id" title="binder">fb1</span></a> <a id="fb2:76" class="idref" href="#fb2:76"><span class="id" title="binder">fb2</span></a> : <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="un_related:77" class="idref" href="#un_related:77"><span class="id" title="binder">un_related</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.Block.html#Unrelated"><span class="id" title="definition">Unrelated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:75"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:76"><span class="id" title="variable">fb2</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb1_in:78" class="idref" href="#fb1_in:78"><span class="id" title="binder">fb1_in</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:75"><span class="id" title="variable">fb1</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:74"><span class="id" title="variable">t</span></a>)))<br/>
&nbsp;&nbsp;(<a id="fb2_in:79" class="idref" href="#fb2_in:79"><span class="id" title="binder">fb2_in</span></a>:<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:76"><span class="id" title="variable">fb2</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:74"><span class="id" title="variable">t</span></a>)))<br/>
&nbsp;&nbsp;(<a id="finalized_same_round:80" class="idref" href="#finalized_same_round:80"><span class="id" title="binder">finalized_same_round</span></a> : <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:75"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:76"><span class="id" title="variable">fb2</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="t3:81" class="idref" href="#t3:81"><span class="id" title="binder">t3</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:82" class="idref" href="#v:82"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:83" class="idref" href="#r:83"><span class="id" title="binder">r</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Existence.html#IsRoundAt"><span class="id" title="definition">Rounds.Existence.IsRoundAt</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:82"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t3:81"><span class="id" title="variable">t3</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:75"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>) <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:83"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">Votes.is_safe</span></a> (<a class="idref" href="Grandpa.OpaqueRound.html#get_all_prevote_votes"><span class="id" title="definition">OpaqueRound.get_all_prevote_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:83"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>
</div>

<div class="doc">
    We are going to prove that the voter who finalized the  block <span class="inlinecode"><span class="id" title="var">fb1</span></span>
     at t + synchronisation can see block <span class="inlinecode"><span class="id" title="var">fb2</span></span> as finalized and has enough
     information to find the set of byzantine voters.
    Why t+synchronisation time?
    To have <span class="inlinecode"><span class="id" title="var">fb1</span></span> and <span class="inlinecode"><span class="id" title="var">fb2</span></span> as finalized blocks, we
      must have that <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Vectors.Vector.html#t"><span class="id" title="inductive">t</span></a></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a>(<span class="id" title="var">fb1.time</span>,<span class="id" title="var">fb2.time</span>)</span> <span class="inlinecode"></span>
    So, after synchronisation time we guaranteed that the voter who finalized
     <span class="inlinecode"><span class="id" title="var">fb1</span></span> can see the finalization information of <span class="inlinecode"><span class="id" title="var">fb2</span></span>.
    We can state this in the lemma explicitly, but is easier to apply it
     in the main theorem if leave it as `exists t3` instead.

<div class="paragraph"> </div>

  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="theorem_4_1_lt" class="idref" href="#theorem_4_1_lt"><span class="id" title="lemma">theorem_4_1_lt</span></a> `{<a id="io:84" class="idref" href="#io:84"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:85" class="idref" href="#t:85"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb1:86" class="idref" href="#fb1:86"><span class="id" title="binder">fb1</span></a> <a id="fb2:87" class="idref" href="#fb2:87"><span class="id" title="binder">fb2</span></a> : <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="un_related:88" class="idref" href="#un_related:88"><span class="id" title="binder">un_related</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.Block.html#Unrelated"><span class="id" title="definition">Unrelated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:86"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:87"><span class="id" title="variable">fb2</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb1_in:89" class="idref" href="#fb1_in:89"><span class="id" title="binder">fb1_in</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:86"><span class="id" title="variable">fb1</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:85"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb2_in:90" class="idref" href="#fb2_in:90"><span class="id" title="binder">fb2_in</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:87"><span class="id" title="variable">fb2</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:85"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb1_lower:91" class="idref" href="#fb1_lower:91"><span class="id" title="binder">fb1_lower</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:86"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.DataTypes.NatWrapper.html#::natWrapper_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:87"><span class="id" title="variable">fb2</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#round_number"><span class="id" title="projection">FinalizedBlock.round_number</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="t3:92" class="idref" href="#t3:92"><span class="id" title="binder">t3</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:93" class="idref" href="#v:93"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r_n:94" class="idref" href="#r_n:94"><span class="id" title="binder">r_n</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:95" class="idref" href="#r:95"><span class="id" title="binder">r</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Existence.html#IsRoundAt"><span class="id" title="definition">Rounds.Existence.IsRoundAt</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t3:92"><span class="id" title="variable">t3</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:94"><span class="id" title="variable">r_n</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:95"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">Votes.is_safe</span></a> (<a class="idref" href="Grandpa.OpaqueRound.html#get_all_prevote_votes"><span class="id" title="definition">OpaqueRound.get_all_prevote_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:95"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( 3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:94"><span class="id" title="variable">r_n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:94"><span class="id" title="variable">r_n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Theorem 4.1
The original lemma states that

<div class="paragraph"> </div>

  if we finalized two unrelated blocks
  <span class="inlinecode"><span class="id" title="var">fb1</span></span> y <span class="inlinecode"><span class="id" title="var">fb1</span></span>, then we can find a set <span class="inlinecode"><span class="id" title="var">s</span></span> of voters such that
     |s| &gt;= 1
  and all of the voters in <span class="inlinecode"><span class="id" title="var">s</span></span> voted in a particular vote. Even better
  there exists a synchronous way to find such a set.

<div class="paragraph"> </div>

This doesn't tell anything a bout a synchronous procedure,
but by virtue of coq constructive logic, the proof
of this theorem shows the existence of a procedure to
find the set.

<div class="paragraph"> </div>

Additionally, we need to state the theorem conclusion in
terms of the particular view of a particular voter at some time.
This, since we don't have a notion of
  " all the votes emitted for a round at a time"
But from this theorem and the fact that all voters synchronize eventually
we can conclude that this result happens for any voter

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="theorem_4_1" class="idref" href="#theorem_4_1"><span class="id" title="lemma">theorem_4_1</span></a> `{<a id="io:110" class="idref" href="#io:110"><span class="id" title="binder">io</span></a>:<a class="idref" href="Grandpa.Protocol.Io.html#Io"><span class="id" title="class">Io</span></a>}<br/>
&nbsp;&nbsp;(<a id="t:111" class="idref" href="#t:111"><span class="id" title="binder">t</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;(<a id="fb1:112" class="idref" href="#fb1:112"><span class="id" title="binder">fb1</span></a> <a id="fb2:113" class="idref" href="#fb2:113"><span class="id" title="binder">fb2</span></a> : <a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#FinalizedBlock"><span class="id" title="record">FinalizedBlock</span></a>)<br/>
&nbsp;&nbsp;(<a id="un_related:114" class="idref" href="#un_related:114"><span class="id" title="binder">un_related</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Blocks.Block.html#Unrelated"><span class="id" title="definition">Unrelated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:112"><span class="id" title="variable">fb1</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:113"><span class="id" title="variable">fb2</span></a>.(<a class="idref" href="Grandpa.Protocol.FinalizedBlock.html#block"><span class="id" title="projection">FinalizedBlock.block</span></a>).(<a class="idref" href="Grandpa.Blocks.AnyBlock.html#block"><span class="id" title="projection">AnyBlock.block</span></a>)<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb1_in:115" class="idref" href="#fb1_in:115"><span class="id" title="binder">fb1_in</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb1:112"><span class="id" title="variable">fb1</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:111"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="fb2_in:116" class="idref" href="#fb2_in:116"><span class="id" title="binder">fb2_in</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">List.In</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#fb2:113"><span class="id" title="variable">fb2</span></a> (<a class="idref" href="Grandpa.Protocol.State.html#global_finalized_blocks"><span class="id" title="projection">global_finalized_blocks</span></a> (<a class="idref" href="Grandpa.Protocol.Protocol.html#get_state_up_to"><span class="id" title="definition">get_state_up_to</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t:111"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="t3:117" class="idref" href="#t3:117"><span class="id" title="binder">t3</span></a>:<a class="idref" href="Grandpa.Time.html#Time"><span class="id" title="definition">Time</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:118" class="idref" href="#v:118"><span class="id" title="binder">v</span></a>:<a class="idref" href="Grandpa.Voter.html#Voter"><span class="id" title="record">Voter</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r_n:119" class="idref" href="#r_n:119"><span class="id" title="binder">r_n</span></a>:<a class="idref" href="Grandpa.RoundNumber.html#RoundNumber"><span class="id" title="definition">RoundNumber</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="r:120" class="idref" href="#r:120"><span class="id" title="binder">r</span></a>:<a class="idref" href="Grandpa.OpaqueRound.html#OpaqueRoundState"><span class="id" title="inductive">OpaqueRound.OpaqueRoundState</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Protocol.Proofs.Consistency.Rounds.Existence.html#IsRoundAt"><span class="id" title="definition">Rounds.Existence.IsRoundAt</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#v:118"><span class="id" title="variable">v</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#t3:117"><span class="id" title="variable">t3</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:119"><span class="id" title="variable">r_n</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:120"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Grandpa.Votes.html#is_safe"><span class="id" title="definition">Votes.is_safe</span></a> (<a class="idref" href="Grandpa.OpaqueRound.html#get_all_prevote_votes"><span class="id" title="definition">OpaqueRound.get_all_prevote_votes</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r:120"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( 3 <a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="Grandpa.Protocol.State.html#get_round_bizantiners_number"><span class="id" title="definition">get_round_bizantiners_number</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:119"><span class="id" title="variable">r_n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="Grandpa.DataTypes.Dictionary.html#to_list"><span class="id" title="definition">Dictionary.to_list</span></a> (<a class="idref" href="Grandpa.Protocol.Io.html#io_get_round_voters"><span class="id" title="method">io_get_round_voters</span></a> <a class="idref" href="Grandpa.Protocol.Proofs.Safety.html#r_n:119"><span class="id" title="variable">r_n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)%<span class="id" title="var">nat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">eqb</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">math</span>.<br/>
<span class="id" title="keyword">Close</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">natWrapper</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>